<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrailFinder</title>
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<div th:replace="~{fragments/topnav :: navbar}"></div>
<div th:replace="~{fragments/topnav :: login}"></div>

<h2>Trail Details</h2>

<div class="center-table">
    <table id="trail-table" class="table-bordered table table-hover table-secondary">
        <tr id="header-row">
            <td class="table-primary"><b>Name</b></td>
            <td class="table-primary"><b>Type</b></td>
            <td class="table-primary"><b>Difficulty</b></td>
            <td class="table-primary"><b>Address</b></td>
            <td class="table-primary"><b>Zip Code</b></td>
            <td class="table-primary"><b>Latitude</b></td>
            <td class="table-primary"><b>Longitude</b></td>
            <td class="table-primary"><b>Temperature</b></td>
        </tr>
        <tr id="foundtrail-row" th:each="trail : ${trailDetails}">
            <td th:text="${trail.key.name}"></td>
            <td th:text="${trail.key.trailType}"></td>
            <td th:text="${trail.key.difficulty}"></td>
            <td th:text="${trail.key.address}"></td>
            <td th:text="${trail.key.zipCode}"></td>
            <td th:text="${trail.key.latitude}"></td>
            <td th:text="${trail.key.longitude}"></td>
            <td th:text="*{trail.value + 'Â°F'}"></td>
        </tr>
    </table>
        <div class="text-center mt-3">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Add To Favorites</button>
        </div>
</div>

<!-- Below is the possible future logic for adding a favorite trail based on what the user clicked on using a button - as of right now it doesn't work properly
<div class="addFav">
    <form id="addFavoriteForm" method="POST">
        <button type="button" class="btn btn-success" th:onclick="|addFavorite('${trail.key.name}', '${trail.key.zipCode}')|">Add to Favorites</button>
    </form>
</div>
-->
<h2>Alert Details</h2>

<div class="center-table">
    <table id="alert-table" class="table-bordered table table-hover table-secondary">
        <tr id="header" class="table-default">
            <td class="table-primary"><b>Alert ID</b></td>
            <td class="table-primary"><b>Trail</b></td>
            <td class="table-primary"><b>Alert Description</b></td>
            <td class="table-primary"><b>User</b></td>
        </tr>
        <tr id="alert-row" th:each="alert : ${foundAlerts}">
            <td th:text="${alert.alertID}"></td>
            <td th:text="${alert.trail.name}"></td>
            <td th:text="${alert.alertText}"></td>
            <td th:text="${alert.user.name}"></td>
        </tr>
    </table>
</div>

<div class="container alerts">
    <div class="add">
        <h3>Add Alert</h3>
        <form method="POST" action="#" th:action="@{/addTrailAlert}">

            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="floatingInput3" name="alert" placeholder="x" required>
                <label for="floatingInput3">Alert</label>
            </div>

            <div class="form-floating mb-3" th:each="trail : ${trailDetails}">
                <!-- Write your comments here <input type="text" class="form-control" id="floatingInput2" name="Trail_Name" placeholder="x" required> Write your comments here -->
                <input type="text" class="form-control" id="floatingInput2" name="trailName" th:value="${trail.key.name}" /> <!-- th:attr="name='quizID'" -->
                <label for="floatingInput2">Trail Name</label>
            </div>

            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="floatingInput6" name="userName" value="Jacob" required>
                <label for="floatingInput6">User</label>
                <input type="submit" class="btn btn-success" value="Submit">
            </div>

        </form>
    </div>
    <div class="end">
        <h3>End Alert</h3>
        <form method="POST">
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="floatingInput4" name="Trail_Name" placeholder="x" required>
                <label for="floatingInput4">Trail Name</label>
            </div>
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="floatingInput5" name="Alert" placeholder="x" required>
                <label for="floatingInput5">User</label>
                <input type="submit" class="btn btn-success" value="Submit">
            </div>
        </form>
    </div>
</div>

<script th:src="@{/js/LoginStatus.js}"></script>
<script th:src="@{/js/TrailAutocomplete.js}"></script>

</body>
</html>